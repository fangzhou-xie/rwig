[{"path":"https://fangzhou-xie.github.io/rwig/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2025 rwig authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://fangzhou-xie.github.io/rwig/articles/barycenter.html","id":"difference-from-sinkhorn","dir":"Articles","previous_headings":"","what":"Difference from sinkhorn()","title":"Barycenter Algorithms","text":"interface barycenter() almost identical sinkhorn() (see vignette(\"sinkhorn\")), except name algorithm. sinkhorn() accepts three parameters method argument: vanilla, log, auto; whereas barycenter() accepts parallel, log, auto. can still set gradient, threading (log), parameters control computation sinkhorn(), also need supply external vector b_ext compute quadratic loss output barycenter b_ext.","code":"b <- c(.2, .2, .2, .2, .2) sol <- barycenter(A, C, w, b_ext = b, barycenter_control = list(reg = reg, with_grad = TRUE))"},{"path":"https://fangzhou-xie.github.io/rwig/articles/barycenter.html","id":"see-also","dir":"Articles","previous_headings":"","what":"See Also","title":"Barycenter Algorithms","text":"See also vignette(\"sinkhorn\").","code":""},{"path":"https://fangzhou-xie.github.io/rwig/articles/barycenter.html","id":"reference","dir":"Articles","previous_headings":"","what":"Reference","title":"Barycenter Algorithms","text":"Peyré, G., & Cuturi, M. (2019). Computational Optimal Transport: Applications Data Science. Foundations Trends® Machine Learning, 11(5–6), 355–607. https://doi.org/10.1561/2200000073 Xie, F. (2025). Deriving Gradients Popular Optimal Transport Algorithms (. arXiv:2504.08722). arXiv. https://doi.org/10.48550/arXiv.2504.08722","code":""},{"path":"https://fangzhou-xie.github.io/rwig/articles/gradient.html","id":"see-also","dir":"Articles","previous_headings":"","what":"See Also","title":"Computation of the Gradients","text":"See also vignette(\"sinkhorn\"), vignette(\"barycenter\").","code":""},{"path":"https://fangzhou-xie.github.io/rwig/articles/gradient.html","id":"references","dir":"Articles","previous_headings":"","what":"References","title":"Computation of the Gradients","text":"Xie, F. (2025). Deriving Gradients Popular Optimal Transport Algorithms (. arXiv:2504.08722). arXiv. https://doi.org/10.48550/arXiv.2504.08722","code":""},{"path":"https://fangzhou-xie.github.io/rwig/articles/sinkhorn.html","id":"get-started-with-sinkhorn-algorithm","dir":"Articles","previous_headings":"","what":"Get Started with Sinkhorn Algorithm","title":"Sinkhorn Algorithms","text":"Suppose two probability vectors b, example, cost matrix C regularization parameter reg = .1. can compute optimal transport plan sinkhorn() algorithm: optimal coupling matrix (optimal transport plan) P, two scaling vectors f, g method “log”.","code":"library(rwig) |> suppressPackageStartupMessages() a <- c(.3, .4, .1, .1, .1) b <- c(.4, .5, .1) C <- rbind(   c(.1, .2, .3),   c(.2, .3, .4),   c(.4, .3, .2),   c(.3, .2, .1),   c(.5, .5, .4) ) reg <- .1 sinkhorn(   a,   b,   C,   sinkhorn_control = list(     reg = reg,     verbose = 0   ) ) #> $P #>             [,1]       [,2]        [,3] #> [1,] 0.153872665 0.13773502 0.008392325 #> [2,] 0.205163553 0.18364670 0.011189767 #> [3,] 0.009441141 0.06244481 0.028114038 #> [4,] 0.009441141 0.06244481 0.028114038 #> [5,] 0.022081501 0.05372866 0.024189833 #>  #> $f #> [1] -0.06969114  0.05907707 -0.04879600 -0.14879600  0.13617034 #>  #> $g #> [1] -0.01747185  0.07144879 -0.10835262 #>  #> $loss #> [1] -0.08551829 #>  #> $iter #> [1] 10 #>  #> $err #> [1] 2.149571e-07 #>  #> $return_status #> [1] 0 #>  #> $method #> [1] \"log\""},{"path":"https://fangzhou-xie.github.io/rwig/articles/sinkhorn.html","id":"vanilla-log-and-auto-sinkhorn-algorithms","dir":"Articles","previous_headings":"","what":"Vanilla, Log, and Auto Sinkhorn Algorithms","title":"Sinkhorn Algorithms","text":"two different methods Sinkhorn algorithm implemented wig package computation regularized OT problem: vanilla Sinkhorn log-stabilized Sinkhorn. vanilla algorithm usually faster, inherently parallel computation can done purely matrix-vector matrix-matrix operations. However, vanilla algorithm commonly known instability regularization parameter small, log-stabilized Sinkhorn handle arbitrarily small reg. cost log algorithm typically slower vanilla one, requires column--column row--row soft-minimums. example, can speed log algorithm, used multi-threading speed computation. Moreover, also provided “auto” method, trying provide heuristics determining whether use “vanilla” “log” method automatically. also default algorithm. Although mostly likely avoid , can also tweak threshold argument tune “auto” method. default value .1: smaller means likely use “vanilla” method, bigger means likely use “log” method. know algorithm use, directly set method argument instead . See also vignette(\"barycenter\").","code":"sol_vanilla <- sinkhorn(   a,   b,   C,   sinkhorn_control = list(     reg = reg,     method = \"vanilla\",     verbose = 0   ) ) sol_log <- sinkhorn(   a,   b,   C,   sinkhorn_control = list(     reg = reg,     method = \"log\",     verbose = 0   ) ) sol_thread <- sinkhorn(   a,   b,   C,   sinkhorn_control = list(     reg = reg,     method = \"log\",     n_threads = 4,     verbose = 0   ) ) sol_auto <- sinkhorn(   a,   b,   C,   sinkhorn_control = list(     reg = reg,     threshold = .1,     verbose = 0   ) )"},{"path":"https://fangzhou-xie.github.io/rwig/articles/sinkhorn.html","id":"gradient-of-loss-w-r-t--a","dir":"Articles","previous_headings":"","what":"Gradient of Loss w.r.t. a","title":"Sinkhorn Algorithms","text":"derived Xie (2025), also provide gradient Sinkhorn algorithm w.r.t. source density . default gradient calculation FALSE, can turn following: See also vignette(\"barycenter\"), vignette(\"gradient\").","code":"sol_grad <- sinkhorn(   a,   b,   C,   sinkhorn_control = list(     reg = reg,     with_grad = TRUE,     verbose = 0   ) )  sol_grad$grad_a #> [1] -0.06627247  0.06249575 -0.04537730 -0.14537729  0.13958900"},{"path":"https://fangzhou-xie.github.io/rwig/articles/sinkhorn.html","id":"other-control-parameters","dir":"Articles","previous_headings":"","what":"Other Control Parameters","title":"Sinkhorn Algorithms","text":"default sinkhorn_control argument, discussed reg, with_grad, threshold already. max_iter zero_tol arguments parameters determine maximum number iterations convergence condition Sinkhorn algorithms. verbose useful printing useful information computation. can set non-negative integer (0 meaning verbose), algorithm update info every verbose steps. example, See also vignette(\"barycenter\").","code":"sinkhorn_control = list(   reg = .1,   with_grad = FALSE,   method = \"auto\",   threshold = .1,   max_iter = 1000L,   zero_tol = 1e-6,   verbose = 0L ) sol_verbose <- sinkhorn(   a,   b,   C,   sinkhorn_control = list(     reg = reg,     verbose = 10   ) ) #> `method` is automatically switched to \"log\" #> Forward pass: #> iter: 1, err: 0.3201, last speed: 0.000, avg speed: 0.000"},{"path":"https://fangzhou-xie.github.io/rwig/articles/sinkhorn.html","id":"reference","dir":"Articles","previous_headings":"","what":"Reference","title":"Sinkhorn Algorithms","text":"Peyré, G., & Cuturi, M. (2019). Computational Optimal Transport: Applications Data Science. Foundations Trends® Machine Learning, 11(5–6), 355–607. https://doi.org/10.1561/2200000073 Xie, F. (2025). Deriving Gradients Popular Optimal Transport Algorithms (. arXiv:2504.08722). arXiv. https://doi.org/10.48550/arXiv.2504.08722","code":""},{"path":"https://fangzhou-xie.github.io/rwig/articles/specs.html","id":"wig_control","dir":"Articles","previous_headings":"","what":"wig_control","title":"WDL and WIG Model Specs","text":"options needed wig_specs(). default, group_unit dictates level time group documents, passed lubridate::floor_date() unit argument. default option “month” obtain monthly time series index, options can specified following unit argument lubridate::floor_date(). svd_method can either “docs” “topics”. “doc” method means Truncated SVD applied reconstructed documents get index directly; whereas “topics” means TSVD applied topics matrix construction index. latter one one originally proposed Xie (2020). standardize: bool, whether standardize result index mean 100 standard deviation 1. default true, following Baker et al. (2016), Xie (2020).","code":"wig_control = list(   group_unit = \"month\",   svd_method = \"docs\",   standardize = TRUE )"},{"path":"https://fangzhou-xie.github.io/rwig/articles/specs.html","id":"wdl_control","dir":"Articles","previous_headings":"","what":"wdl_control","title":"WDL and WIG Model Specs","text":"options supplied WDL modelling, used wdl_specs() wig_specs(). num_topics: number topics topic modeling batch_size: batch size training purpose epochs: epochs (.e. number passes) training data shuffle: bool, whether shuffle input data randomly verbose: bool, whether print useful diagnostic information","code":""},{"path":"https://fangzhou-xie.github.io/rwig/articles/specs.html","id":"tokenizer_control","dir":"Articles","previous_headings":"","what":"tokenizer_control","title":"WDL and WIG Model Specs","text":"Arguments tokenizers::tokenize_word_stems().","code":""},{"path":"https://fangzhou-xie.github.io/rwig/articles/specs.html","id":"word2vec_control","dir":"Articles","previous_headings":"","what":"word2vec_control","title":"WDL and WIG Model Specs","text":"Arguments word2vec::word2vec(), following default parameters:","code":"type = \"cbow\" dim = 10 min_count = 1"},{"path":"https://fangzhou-xie.github.io/rwig/articles/specs.html","id":"barycenter_control","dir":"Articles","previous_headings":"","what":"barycenter_control","title":"WDL and WIG Model Specs","text":"Identical barycenter_control barycenter() function, default","code":"with_grad = TRUE"},{"path":"https://fangzhou-xie.github.io/rwig/articles/specs.html","id":"optimizer_control","dir":"Articles","previous_headings":"","what":"optimizer_control","title":"WDL and WIG Model Specs","text":"Parameters control optimizer (SGD, Adam, AdamW). default optimizer AdamW (“adamw”), can also choose vanilla SGD (“sgd”) vanilla (“adam”). can also set learning rate lr hyper-parameter search. default parameters mostly untouched people, unless know exactly . reference, can see Section 7.1 Xie (2025), references within.","code":"optimizer_control = list(   optimizer = \"adamw\",   lr = .005,   decay = .01,   beta1 = .9,   beta2 = .999,   eps = 1e-8 )"},{"path":"https://fangzhou-xie.github.io/rwig/articles/specs.html","id":"see-also","dir":"Articles","previous_headings":"","what":"See Also","title":"WDL and WIG Model Specs","text":"See also vignette(\"wdl-model\"), vignette(\"wig-model\").","code":""},{"path":"https://fangzhou-xie.github.io/rwig/articles/specs.html","id":"references","dir":"Articles","previous_headings":"","what":"References","title":"WDL and WIG Model Specs","text":"Baker, S. R., Bloom, N., & Davis, S. J. (2016). Measuring economic policy uncertainty. Quarterly Journal Economics, 131(4), 1593–1636. https://doi.org/10.1093/qje/qjw024 Peyré, G., & Cuturi, M. (2019). Computational Optimal Transport: Applications Data Science. Foundations Trends® Machine Learning, 11(5–6), 355–607. https://doi.org/10.1561/2200000073 Schmitz, M. ., Heitz, M., Bonneel, N., Ngolè, F., Coeurjolly, D., Cuturi, M., Peyré, G., & Starck, J.-L. (2018). Wasserstein dictionary learning: Optimal transport-based unsupervised nonlinear dictionary learning. SIAM Journal Imaging Sciences, 11(1), 643–678. https://doi.org/10.1137/17M1140431 Xie, F. (2020). Wasserstein index generation model: Automatic generation time-series index application economic policy uncertainty. Economics Letters, 186, 108874. https://doi.org/10.1016/j.econlet.2019.108874 Xie, F. (2025). Deriving Gradients Popular Optimal Transport Algorithms (. arXiv:2504.08722). arXiv. https://doi.org/10.48550/arXiv.2504.08722","code":""},{"path":"https://fangzhou-xie.github.io/rwig/articles/threading.html","id":"see-also","dir":"Articles","previous_headings":"","what":"See Also","title":"Multi-threading Support","text":"See also vignette(\"sinkhorn\"), vignette(\"barycenter\").","code":""},{"path":"https://fangzhou-xie.github.io/rwig/articles/threading.html","id":"references","dir":"Articles","previous_headings":"","what":"References","title":"Multi-threading Support","text":"Peyré, G., & Cuturi, M. (2019). Computational Optimal Transport: Applications Data Science. Foundations Trends® Machine Learning, 11(5–6), 355–607. https://doi.org/10.1561/2200000073 Xie, F. (2025). Deriving Gradients Popular Optimal Transport Algorithms (. arXiv:2504.08722). arXiv. https://doi.org/10.48550/arXiv.2504.08722","code":""},{"path":"https://fangzhou-xie.github.io/rwig/articles/tsvd.html","id":"references","dir":"Articles","previous_headings":"","what":"References","title":"Truncated SVD","text":"Bro, R., Acar, E., & Kolda, T. G. (2008). Resolving sign ambiguity singular value decomposition. Journal Chemometrics, 22(2), 135–140. https://doi.org/10.1002/cem.1122","code":""},{"path":"https://fangzhou-xie.github.io/rwig/articles/wdl-model.html","id":"see-also","dir":"Articles","previous_headings":"","what":"See Also","title":"WDL Model","text":"See also vignette(\"specs\").","code":""},{"path":"https://fangzhou-xie.github.io/rwig/articles/wdl-model.html","id":"references","dir":"Articles","previous_headings":"","what":"References","title":"WDL Model","text":"Blei, D. M., Ng, . Y., & Jordan, M. . (2003). Latent dirichlet allocation. Journal Machine Learning Research, 3(Jan), 993–1022. Peyré, G., & Cuturi, M. (2019). Computational Optimal Transport: Applications Data Science. Foundations Trends® Machine Learning, 11(5–6), 355–607. https://doi.org/10.1561/2200000073 Schmitz, M. ., Heitz, M., Bonneel, N., Ngolè, F., Coeurjolly, D., Cuturi, M., Peyré, G., & Starck, J.-L. (2018). Wasserstein dictionary learning: Optimal transport-based unsupervised nonlinear dictionary learning. SIAM Journal Imaging Sciences, 11(1), 643–678. https://doi.org/10.1137/17M1140431 Xie, F. (2025). Deriving Gradients Popular Optimal Transport Algorithms (. arXiv:2504.08722). arXiv. https://doi.org/10.48550/arXiv.2504.08722","code":""},{"path":"https://fangzhou-xie.github.io/rwig/articles/wig-model.html","id":"see-also","dir":"Articles","previous_headings":"","what":"See Also","title":"WIG Model","text":"See also vignette(\"wdl-model\"), vignette(\"specs\").","code":""},{"path":"https://fangzhou-xie.github.io/rwig/articles/wig-model.html","id":"references","dir":"Articles","previous_headings":"","what":"References","title":"WIG Model","text":"Baker, S. R., Bloom, N., & Davis, S. J. (2016). Measuring economic policy uncertainty. Quarterly Journal Economics, 131(4), 1593–1636. https://doi.org/10.1093/qje/qjw024 Xie, F. (2020). Wasserstein index generation model: Automatic generation time-series index application economic policy uncertainty. Economics Letters, 186, 108874. https://doi.org/10.1016/j.econlet.2019.108874","code":""},{"path":"https://fangzhou-xie.github.io/rwig/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Fangzhou Xie. Author, maintainer.","code":""},{"path":"https://fangzhou-xie.github.io/rwig/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Xie F (2026). rwig: Wasserstein Index Generation (WIG) Model R. R package version 0.1.0, https://github.com/fangzhou-xie/rwig.","code":"@Manual{,   title = {rwig: Wasserstein Index Generation (WIG) Model in R},   author = {Fangzhou Xie},   year = {2026},   note = {R package version 0.1.0},   url = {https://github.com/fangzhou-xie/rwig}, }"},{"path":"https://fangzhou-xie.github.io/rwig/index.html","id":"rwig","dir":"","previous_headings":"","what":"Wasserstein Index Generation (WIG) Model in R","title":"Wasserstein Index Generation (WIG) Model in R","text":"rwig package implements Sinkhorn algorithms regularized Optimal Transport problems, Wasserstein Barycenter algorithms regularized Wasserstein Barycenter problems, Wasserstein Dictionary Learning (WDL) model, Wasserstein Index Generation (WIG) model R (see references ). methods implemented ground C++ Armadillo (Rcpp RcppArmadillo), additional support multi-threading log-stablized methods sinkhorn barycenter. See vignette multi-threading faster processing.","code":""},{"path":"https://fangzhou-xie.github.io/rwig/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Wasserstein Index Generation (WIG) Model in R","text":"package currently heavy development can considered alpha stage. can install development version rwig GitHub :","code":"# install.packages(\"pak\") pak::pak(\"fangzhou-xie/rwig\")"},{"path":"https://fangzhou-xie.github.io/rwig/index.html","id":"get-started","dir":"","previous_headings":"","what":"Get Started","title":"Wasserstein Index Generation (WIG) Model in R","text":"Please check vignettes examples using package “Articles” drop menu documentation website.","code":""},{"path":"https://fangzhou-xie.github.io/rwig/index.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Wasserstein Index Generation (WIG) Model in R","text":"Please use following cite works:","code":"@article{xie2020,   title = {Wasserstein Index Generation Model: Automatic Generation of Time-Series Index with Application to Economic Policy Uncertainty},   author = {Xie, Fangzhou},   year = 2020,   month = jan,   journal = {Economics Letters},   volume = {186},   pages = {108874},   issn = {0165-1765},   doi = {10.1016/j.econlet.2019.108874},   urldate = {2019-12-10}, }"},{"path":"https://fangzhou-xie.github.io/rwig/index.html","id":"reference","dir":"","previous_headings":"","what":"Reference","title":"Wasserstein Index Generation (WIG) Model in R","text":"Peyré, G., & Cuturi, M. (2019). Computational Optimal Transport: Applications Data Science. Foundations Trends® Machine Learning, 11(5–6), 355–607. https://doi.org/10.1561/2200000073 Schmitz, M. ., Heitz, M., Bonneel, N., Ngolè, F., Coeurjolly, D., Cuturi, M., Peyré, G., & Starck, J.-L. (2018). Wasserstein dictionary learning: Optimal transport-based unsupervised nonlinear dictionary learning. SIAM Journal Imaging Sciences, 11(1), 643–678. https://doi.org/10.1137/17M1140431 Xie, F. (2020). Wasserstein index generation model: Automatic generation time-series index applieion economic policy uncertainty. Economics Letters, 186, 108874. https://doi.org/10.1016/j.econlet.2019.108874 Xie, F. (2025). Deriving Gradients Popular Optimal Transport Algorithms (. arXiv:2504.08722). arXiv. https://doi.org/10.48550/arXiv.2504.08722","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/barycenter.html","id":null,"dir":"Reference","previous_headings":"","what":"Barycenter algorithm — barycenter","title":"Barycenter algorithm — barycenter","text":"Barycenter algorithm solve entropy-regularized Optimal Transport Barycenter problems. detailed explaination, please refer vignette(\"barycenter\").","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/barycenter.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Barycenter algorithm — barycenter","text":"","code":"barycenter(   A,   C,   w,   b_ext = NULL,   barycenter_control = list(reg = 0.1, with_grad = FALSE, use_cuda = TRUE, n_threads = 0,     method = \"auto\", threshold = 0.1, max_iter = 1000, zero_tol = 1e-06, verbose = 0) )"},{"path":"https://fangzhou-xie.github.io/rwig/reference/barycenter.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Barycenter algorithm — barycenter","text":"numeric matrix, source discrete densities (M * S) C numeric matrix, cost matrix source target (M * N) w numeric vector, weight vector (S) b_ext numeric vector, used calculate quadratic loss computed barycenter (default = NULL) barycenter_control list, control parameters computation reg: double, regularization parameter (default = .1) with_grad: bool, whether calculate gradient w.r.t. n_threads: int, number threads (used method = \"log\", ignored method = \"parallel\", default = 0) threshold: double, threshold value \"auto\" method default method = \"log\" stablized computation log-domain (default = .1) max_iter: int, maximum iteration barycenter algorithm (default = 1000) zero_tol: double, determine covergence (default = 1e-6) verbose: int, print debug info algorithm every verbose iteration (default 0, .e. printing anything)","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/barycenter.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Barycenter algorithm — barycenter","text":"list results b: numeric vector, computed barycenter grad_A: gradient w.r.t. (with_grad = TRUE) grad_w: gradient w.r.t. w (with_grad = TRUE) loss: double, quadratic loss b b_ext (with_grad = TRUE) U, V: scaling variables Sinkhorn algorithm (method = \"parallel\") F, G: scaling variables Sinkhorn algorithm (method = \"log\") iter: iterations algorithm err: condition convergence return_status: 0 (convergence), 1 (max iteration reached), 2 ()","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/barycenter.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Barycenter algorithm — barycenter","text":"general function solve OT Barycenter problem, use either parallel (method = \"parallel\") log-stablized Barycenter algorithm (method = \"log\") solving problem.","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/barycenter.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Barycenter algorithm — barycenter","text":"Peyré, G., & Cuturi, M. (2019). Computational Optimal Transport: Applications Data Science. Foundations Trends® Machine Learning, 11(5–6), 355–607. https://doi.org/10.1561/2200000073 Xie, F. (2025). Deriving Gradients Popular Optimal Transport Algorithms (. arXiv:2504.08722). arXiv. https://doi.org/10.48550/arXiv.2504.08722","code":""},{"path":[]},{"path":"https://fangzhou-xie.github.io/rwig/reference/barycenter.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Barycenter algorithm — barycenter","text":"","code":"A <- rbind(c(.3, .2), c(.2, .1), c(.1, .2), c(.1, .1), c(.3, .4)) C <- rbind(   c(.1, .2, .3, .4, .5),   c(.2, .3, .4, .3, .2),   c(.4, .3, .2, .1, .2),   c(.3, .2, .1, .2, .5),   c(.5, .5, .4, .0, .2) ) w <- c(.4, .6) b <- c(.2, .2, .2, .2, .2) reg <- .1  # simple barycenter example sol <- barycenter(A, C, w, barycenter_control = list(reg = reg)) #> `method` is automatically switched to \"log\" #> Forward pass: #> iter: 1, err: 0.3207, last speed: 0.025, avg speed: 0.025 #> iter: 11, err: 0.0020, last speed: 0.000, avg speed: 0.002 #> iter: 21, err: 0.0000, last speed: 0.000, avg speed: 0.001  # you can also supply arguments to control the computation # for example, including the loss and gradient w.r.t. `A` sol <- barycenter(A, C, w, b, barycenter_control = list(reg = reg, with_grad = TRUE)) #> `method` is automatically switched to \"log\" #> Forward pass: #> iter: 1, err: 0.3207, last speed: 0.000, avg speed: 0.000 #> iter: 11, err: 0.0020, last speed: 0.000, avg speed: 0.000 #> iter: 21, err: 0.0000, last speed: 0.000, avg speed: 0.000 #> Backward pass:"},{"path":"https://fangzhou-xie.github.io/rwig/reference/check_cuda.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if CUDA is available — check_cuda","title":"Check if CUDA is available — check_cuda","text":"Check CUDA available GPU computations.","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/check_cuda.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if CUDA is available — check_cuda","text":"","code":"check_cuda()"},{"path":"https://fangzhou-xie.github.io/rwig/reference/check_cuda.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if CUDA is available — check_cuda","text":"logical, TRUE CUDA available, FALSE otherwise","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/check_cuda.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check if CUDA is available — check_cuda","text":"","code":"if (check_cuda()) {   cat(\"CUDA is available for GPU computations.\\n\") } else {   cat(\"CUDA is not available.\\n\") } #> CUDA is not available."},{"path":"https://fangzhou-xie.github.io/rwig/reference/headlines.html","id":null,"dir":"Reference","previous_headings":"","what":"NYT headlines by economic policy uncertainty — headlines","title":"NYT headlines by economic policy uncertainty — headlines","text":"NYT headlines economic policy uncertainty","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/headlines.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"NYT headlines by economic policy uncertainty — headlines","text":"","code":"headlines"},{"path":[]},{"path":"https://fangzhou-xie.github.io/rwig/reference/headlines.html","id":"headlines","dir":"Reference","previous_headings":"","what":"headlines","title":"NYT headlines by economic policy uncertainty — headlines","text":"data frame 18,507 rows 2 columns: headline Headline NYT News ref_date Date News","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/headlines.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"NYT headlines by economic policy uncertainty — headlines","text":"www.nytimes.com","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/headlines.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"NYT headlines by economic policy uncertainty — headlines","text":"Xie, F. (2020). Wasserstein index generation model: Automatic generation time-series index application economic policy uncertainty. Economics Letters, 186, 108874. https://doi.org/10.1016/j.econlet.2019.108874","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/rwig-package.html","id":null,"dir":"Reference","previous_headings":"","what":"rwig: Wasserstein Index Generation (WIG) Model in R — rwig-package","title":"rwig: Wasserstein Index Generation (WIG) Model in R — rwig-package","text":"Efficient implementation several Optimal Transport algorithms Fangzhou Xie (2025) doi:10.48550/arXiv.2504.08722  Wasserstein Index Generation (WIG) model Fangzhou Xie (2020) doi:10.1016/j.econlet.2019.108874 .","code":""},{"path":[]},{"path":"https://fangzhou-xie.github.io/rwig/reference/rwig-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"rwig: Wasserstein Index Generation (WIG) Model in R — rwig-package","text":"Maintainer: Fangzhou Xie fangzhou.xie@rutgers.edu","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/sinkhorn.html","id":null,"dir":"Reference","previous_headings":"","what":"Sinkhorn algorithm — sinkhorn","title":"Sinkhorn algorithm — sinkhorn","text":"Sinkhorn algorithm solve entropy-regularized Optimal Transport problems. detailed explaination, please refer vignette(\"sinkhorn\").","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/sinkhorn.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Sinkhorn algorithm — sinkhorn","text":"","code":"sinkhorn(   a,   b,   C,   sinkhorn_control = list(reg = 0.1, with_grad = FALSE, use_cuda = TRUE, n_threads = 0,     method = \"auto\", threshold = 0.1, max_iter = 1000L, zero_tol = 1e-06, verbose = 0L) )"},{"path":"https://fangzhou-xie.github.io/rwig/reference/sinkhorn.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Sinkhorn algorithm — sinkhorn","text":"numeric vector, source discrete density (probability vector) b numeric vector, target discrete density (probability vector) C numeric matrix, cost matrix source target sinkhorn_control list, control parameters computation reg double, regularization parameter (default = .1) with_grad: bool, whether calculate gradient w.r.t. n_threads: int, number threads (used method = \"log\", ignored method = \"vanilla\", default = 0) method: character, method use: \"auto\", \"vanilla\", \"log\" \"auto\" try calculate minimum value Gibbs kernel K switch method = \"log\" minimum value less threshold (default = \"auto\") threshold: double, threshold value \"auto\" method default method = \"log\" stablized computation log-domain (default = .1) max_iter: int, maximum iteration sinkhorn algorithm (default = 1000) zero_tol: double, determine covergence (default = 1e-6) verbose: int, print debug info algorithm every verbose iteration (default 0, .e. printing anything)","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/sinkhorn.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Sinkhorn algorithm — sinkhorn","text":"list results P: optimal coupling matrix grad_a: gradient loss w.r.t. (with_grad = TRUE) u, v: scaling vectors loss: regularized loss iter: iterations algorithm err: condition convergence return_status: 0 (convergence), 1 (max iteration reached), 2 ()","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/sinkhorn.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Sinkhorn algorithm — sinkhorn","text":"general function solve OT problem, use either vanilla (method = \"vanilla\") log-stabilized Sinkhorn algorithm (method = \"log\") solving problem.","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/sinkhorn.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Sinkhorn algorithm — sinkhorn","text":"Peyré, G., & Cuturi, M. (2019). Computational Optimal Transport: Applications Data Science. Foundations Trends® Machine Learning, 11(5–6), 355–607. https://doi.org/10.1561/2200000073 Xie, F. (2025). Deriving Gradients Popular Optimal Transport Algorithms (. arXiv:2504.08722). arXiv. https://doi.org/10.48550/arXiv.2504.08722","code":""},{"path":[]},{"path":"https://fangzhou-xie.github.io/rwig/reference/sinkhorn.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Sinkhorn algorithm — sinkhorn","text":"","code":"# simple sinkhorn example a <- c(.3, .4, .1, .1, .1) b <- c(.4, .5, .1) C <- rbind(   c(.1, .2, .3),   c(.2, .3, .4),   c(.4, .3, .2),   c(.3, .2, .1),   c(.5, .5, .4) ) reg <- .1 sol <- sinkhorn(a, b, C, sinkhorn_control = list(reg = reg, verbose = 0))  # you can also supply arguments to control the computation # for example, calculate the gradient w.r.t. a sol <- sinkhorn(a, b, C, sinkhorn_control = list(reg = reg, with_grad = TRUE, verbose = 0))"},{"path":"https://fangzhou-xie.github.io/rwig/reference/tsvd.html","id":null,"dir":"Reference","previous_headings":"","what":"Truncated SVD — tsvd","title":"Truncated SVD — tsvd","text":"Truncated Singular Value Decomposition algorithm","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/tsvd.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Truncated SVD — tsvd","text":"","code":"tsvd(M, k = 1, flip_sign = c(\"auto\", \"sklearn\", \"none\"))"},{"path":"https://fangzhou-xie.github.io/rwig/reference/tsvd.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Truncated SVD — tsvd","text":"M matrix, data analyzed k int, number columns/features kept flip_sign character, one following: \"auto\", \"sklearn\", \"none\"","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/tsvd.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Truncated SVD — tsvd","text":"matrix dimension reduction","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/tsvd.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Truncated SVD — tsvd","text":"Compute truncated SVD dimension reduction. Note SVD suffers \"sign indeterminacy,\" means signs output vectors depend algorithm random state. Two variants \"sign flipping methods\" implemented , one following sklearn implementation Truncated SVD, another Bro et al. (2008).","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/tsvd.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Truncated SVD — tsvd","text":"https://scikit-learn.org/stable/modules/generated/sklearn.decomposition.TruncatedSVD.html Bro, R., Acar, E., & Kolda, T. G. (2008). Resolving sign ambiguity singular value decomposition. Journal Chemometrics, 22(2), 135–140. https://doi.org/10.1002/cem.1122","code":""},{"path":[]},{"path":"https://fangzhou-xie.github.io/rwig/reference/tsvd.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Truncated SVD — tsvd","text":"","code":"A <- rbind(c(1,3), c(2,4)) tsvd(A) #>          [,1] #> [1,] 3.148096 #> [2,] 4.467164"},{"path":"https://fangzhou-xie.github.io/rwig/reference/wdl.html","id":null,"dir":"Reference","previous_headings":"","what":"Wasserstein Dictionary Learning model — wdl","title":"Wasserstein Dictionary Learning model — wdl","text":"Wasserstein Dictionary Learning (WDL) model topic modeling","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/wdl.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Wasserstein Dictionary Learning model — wdl","text":"","code":"wdl(docs, ...)  # S3 method for class 'character' wdl(docs, specs = wdl_specs(), verbose = TRUE, ...)  # S3 method for class 'wdl' print(x, topic = 0, token_per_topic = 5, ...)  # S3 method for class 'wdl' summary(object, topic = 1, token_per_topic = 5, ...)"},{"path":"https://fangzhou-xie.github.io/rwig/reference/wdl.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Wasserstein Dictionary Learning model — wdl","text":"docs character vector, sentences analyzed ... compatibility specs list, model specification WDL see wdl_specs reference verbose bool, whether print useful info x WDL model topic int, number topic printed token_per_topic int, number tokens printed object WDL model","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/wdl.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Wasserstein Dictionary Learning model — wdl","text":"topics weights computed WDL given input data","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/wdl.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Wasserstein Dictionary Learning model — wdl","text":"re-implementation WDL model ground , calls barycenter hood (precise directly calling underlying C++ routine barycenter)","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/wdl.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Wasserstein Dictionary Learning model — wdl","text":"Peyré, G., & Cuturi, M. (2019). Computational Optimal Transport: Applications Data Science. Foundations Trends® Machine Learning, 11(5–6), 355–607. https://doi.org/10.1561/2200000073 Schmitz, M. ., Heitz, M., Bonneel, N., Ngolè, F., Coeurjolly, D., Cuturi, M., Peyré, G., & Starck, J.-L. (2018). Wasserstein dictionary learning: Optimal transport-based unsupervised nonlinear dictionary learning. SIAM Journal Imaging Sciences, 11(1), 643–678. https://doi.org/10.1137/17M1140431 Xie, F. (2025). Deriving Gradients Popular Optimal Transport Algorithms (. arXiv:2504.08722). arXiv. https://doi.org/10.48550/arXiv.2504.08722","code":""},{"path":[]},{"path":"https://fangzhou-xie.github.io/rwig/reference/wdl.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Wasserstein Dictionary Learning model — wdl","text":"","code":"# simple WDL example sentences <- c(\"this is a sentence\", \"this is another one\") wdl_fit <- wdl(sentences) #> `method` is automatically switched to \"log\""},{"path":"https://fangzhou-xie.github.io/rwig/reference/wdl_specs.html","id":null,"dir":"Reference","previous_headings":"","what":"Model Specs for WDL and WIG models — wdl_specs","title":"Model Specs for WDL and WIG models — wdl_specs","text":"Control parameters WDL WIG models","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/wdl_specs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Model Specs for WDL and WIG models — wdl_specs","text":"","code":"wdl_specs(   wdl_control = list(num_topics = 4, batch_size = 64, epochs = 2, shuffle = TRUE, verbose     = FALSE),   tokenizer_control = list(stopwords = stopwords::stopwords()),   word2vec_control = list(type = \"cbow\", dim = 10, min_count = 1),   barycenter_control = list(reg = 0.1, with_grad = TRUE, n_threads = 0, method = \"auto\",     threshold = 0.1, max_iter = 20, zero_tol = 1e-06),   optimizer_control = list(optimizer = \"adamw\", lr = 0.005, decay = 0.01, beta1 = 0.9,     beta2 = 0.999, eps = 1e-08) )  wig_specs(   wig_control = list(group_unit = \"month\", svd_method = \"docs\", standardize = TRUE),   wdl_control = list(num_topics = 4, batch_size = 64, epochs = 2, rng_seed = 123, verbose     = FALSE),   tokenizer_control = list(stopwords = stopwords::stopwords()),   word2vec_control = list(type = \"cbow\", dim = 10, min_count = 1),   barycenter_control = list(reg = 0.1, with_grad = TRUE, method = \"auto\", threshold =     0.1, max_iter = 20, zero_tol = 1e-06),   optimizer_control = list(optimizer = \"adamw\", lr = 0.005, decay = 0.01, beta1 = 0.9,     beta2 = 0.999, eps = 1e-08) )"},{"path":"https://fangzhou-xie.github.io/rwig/reference/wdl_specs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Model Specs for WDL and WIG models — wdl_specs","text":"wdl_control, list, parameters WDL tokenizer_control, list, parameters tokenizers::tokenize_words() word2vec_control, list, parameters word2vec::word2vec() barycenter_control, list, parameters barycenter() optimizer_control, list, parameters optimizer (SGD, Adam, AdamW) wig_control, list, parameters WIG model","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/wdl_specs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Model Specs for WDL and WIG models — wdl_specs","text":"list control lists","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/wdl_specs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Model Specs for WDL and WIG models — wdl_specs","text":"See vignette(\"specs\") details parameters.","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/wdl_specs.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Model Specs for WDL and WIG models — wdl_specs","text":"Peyré, G., & Cuturi, M. (2019). Computational Optimal Transport: Applications Data Science. Foundations Trends® Machine Learning, 11(5–6), 355–607. https://doi.org/10.1561/2200000073 Schmitz, M. ., Heitz, M., Bonneel, N., Ngolè, F., Coeurjolly, D., Cuturi, M., Peyré, G., & Starck, J.-L. (2018). Wasserstein dictionary learning: Optimal transport-based unsupervised nonlinear dictionary learning. SIAM Journal Imaging Sciences, 11(1), 643–678. https://doi.org/10.1137/17M1140431 Kingma, D. P., & Ba, J. (2015). Adam: method stochastic optimization. International Conference Learning Representations (ICLR). Loshchilov, ., & Hutter, F. (2019). Decoupled Weight Decay Regularization (. arXiv:1711.05101). arXiv. https://doi.org/10.48550/arXiv.1711.05101 Xie, F. (2020). Wasserstein index generation model: Automatic generation time-series index application economic policy uncertainty. Economics Letters, 186, 108874. https://doi.org/10.1016/j.econlet.2019.108874 Xie, F. (2025). Deriving Gradients Popular Optimal Transport Algorithms (. arXiv:2504.08722). arXiv. https://doi.org/10.48550/arXiv.2504.08722","code":""},{"path":[]},{"path":"https://fangzhou-xie.github.io/rwig/reference/wig.html","id":null,"dir":"Reference","previous_headings":"","what":"Wasserstein Index Generation model — wig","title":"Wasserstein Index Generation model — wig","text":"Wasserstein Index Generation (WIG) model time-series sentiment index autogeneration","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/wig.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Wasserstein Index Generation model — wig","text":"","code":"wig(.data, date_col, docs_col, ...)  # S3 method for class 'data.frame' wig(.data, date_col, docs_col, specs = wig_specs(), ...)  # S3 method for class 'wig' print(x, topic = 1, token_per_topic = 5, ...)  # S3 method for class 'wig' summary(object, topic = 1, token_per_topic = 5, ...)"},{"path":"https://fangzhou-xie.github.io/rwig/reference/wig.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Wasserstein Index Generation model — wig","text":".data dataframe containing dates/datetimes documents date_col name column dates/datetimes docs_col name column texts/documents ... compatibility specs list, model specification WIG see wig_specs reference x WIG model topic int, number topic printed token_per_topic int, number tokens printed object WIG model","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/wig.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Wasserstein Index Generation model — wig","text":"re-implementation WIG model scratch R.","code":""},{"path":"https://fangzhou-xie.github.io/rwig/reference/wig.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Wasserstein Index Generation model — wig","text":"Xie, F. (2020). Wasserstein index generation model: Automatic generation time-series index application economic policy uncertainty. Economics Letters, 186, 108874. https://doi.org/10.1016/j.econlet.2019.108874","code":""},{"path":[]},{"path":"https://fangzhou-xie.github.io/rwig/reference/wig.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Wasserstein Index Generation model — wig","text":"","code":"# create a small dataset wigdf <- data.frame(   ref_date = as.Date(c(\"2012-01-01\", \"2012-02-01\")),   docs = c(\"this is a sentence\", \"this is another sentence\") )  wigfit <- wig(wigdf, ref_date, docs) #> `method` is automatically switched to \"log\""}]
